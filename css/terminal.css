/* ========================================
   TERMINAL BACKGROUND - Alonso Madroñal Portfolio
   Fixed background layer positioned to the right
   ======================================== */

/* ----------------------------------------
   CONFIGURABLE PARAMETERS
   Change these values to adjust the effect:
   --terminal-blur: blur intensity (default: 8px)
   --terminal-opacity: terminal text opacity (default: 0.4)
   ---------------------------------------- */

/* ----------------------------------------
   TERMINAL BACKGROUND LAYER
   Positioned to the right, narrower and multiline
   ---------------------------------------- */
.terminal-bg {
    position: fixed;
    top: 50%;
    right: 8%;
    transform: translateY(-50%);
    z-index: -1;
    width: 35%;
    max-width: 450px;
    pointer-events: none;
    opacity: var(--terminal-opacity, 0.6);
    transition: opacity 0.5s ease;
}

.terminal-bg__content {
    font-family: var(--font-mono);
    font-size: clamp(1rem, 2vw, 1.5rem);
    color: var(--active-accent-1);
    width: 100%;
    line-height: 1.8;
}

.terminal-bg__line {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    white-space: normal;
    word-wrap: break-word;
    overflow: visible;
}

.terminal-bg__prompt {
    color: var(--active-accent-2);
    font-weight: var(--font-medium);
    flex-shrink: 0;
}

.terminal-bg__text {
    color: var(--active-accent-1);
}

.terminal-bg__cursor {
    display: inline-block;
    width: 0.6em;
    height: 1.2em;
    background-color: var(--active-accent-1);
    animation: cursor-blink 1s step-end infinite;
    vertical-align: text-bottom;
    flex-shrink: 0;
}

@keyframes cursor-blink {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0;
    }
}

/* ----------------------------------------
   SECTION TRANSPARENCY LEVELS
   ---------------------------------------- */

/* Hero section: transparent, terminal fully visible */
.section--transparent {
    background-color: transparent;
}

/* Projects section: frosted glass effect with dynamic transitions */
.section--frosted {
    position: relative;
    background-color: rgba(var(--frosted-bg-rgb, 250, 250, 250), var(--dynamic-frost-opacity, 0.75));
    backdrop-filter: blur(var(--dynamic-frost-blur, var(--terminal-blur, 0.5px)));
    -webkit-backdrop-filter: blur(var(--dynamic-frost-blur, var(--terminal-blur, 0.5px)));
    transition: background-color 0.3s ease, backdrop-filter 0.3s ease;
}

/* Gradient fade at top of frosted section - smooth transition from Hero */
/* Linear progression: 0% opacity (no frosting) → 0.5 opacity (~50% frosting for mid-section) */
.section--frosted::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 450px;
    background: linear-gradient(to bottom,
            rgba(var(--frosted-bg-rgb, 250, 250, 250), 0) 0%,
            /* No frosting - matches Hero */
            rgba(var(--frosted-bg-rgb, 250, 250, 250), 0.125) 25%,
            /* 25% of 0.5 */
            rgba(var(--frosted-bg-rgb, 250, 250, 250), 0.2) 50%,
            /* 50% of 0.5 */
            rgba(var(--frosted-bg-rgb, 250, 250, 250), 0.25) 75%,
            /* 75% of 0.5 */
            rgba(var(--frosted-bg-rgb, 250, 250, 250), 0.25) 100%
            /* ~50% frosting - mid Projects */
        );
    pointer-events: none;
    z-index: 1;
}

/* Gradient fade at bottom of frosted section - smooth transition to About */
/* Linear progression: 0.5 opacity (~50% frosting) → 1.0 opacity (solid About) */
.section--frosted::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 150px;
    background: linear-gradient(to bottom,
            rgba(var(--frosted-bg-rgb, 250, 250, 250), 0.5) 0%,
            /* ~50% frosting */
            rgba(var(--frosted-bg-rgb, 250, 250, 250), 0.75) 50%,
            /* 75% frosting */
            rgba(var(--frosted-bg-rgb, 250, 250, 250), 1.0) 100%
            /* Solid - matches About */
        );
    pointer-events: none;
    z-index: 1;
}

.section--frosted .container {
    max-width: 1000px;
    margin: 0 auto;
    padding-right: calc(var(--space-lg) + 5%);
    position: relative;
    z-index: 2;
}

/* About/Contact: solid background, terminal not visible */
.section--solid {
    background-color: var(--active-bg-primary);
    position: relative;
    z-index: 1;
}

.section--solid.section--alt {
    background-color: var(--active-bg-secondary);
}

/* ----------------------------------------
   THEME-SPECIFIC FROSTED COLORS
   ---------------------------------------- */
:root {
    --frosted-bg-rgb: 250, 250, 250;
}

[data-theme="dark"] {
    --frosted-bg-rgb: 26, 26, 26;
}

[data-theme="dark"] .section--frosted {
    background-color: rgba(var(--frosted-bg-rgb), 0.9);
}

/* Brighter terminal colors for dark mode readability */
[data-theme="dark"] .terminal-bg__content {
    color: #5eead4;
    /* Bright teal - much more visible */
}

[data-theme="dark"] .terminal-bg__prompt {
    color: #67e8f9;
    /* Bright cyan - stands out */
}

[data-theme="dark"] .terminal-bg__cursor {
    background-color: #5eead4;
}

[data-mode="artistic"] {
    --frosted-bg-rgb: 10, 10, 10;
}

[data-mode="artistic"] .section--frosted {
    background-color: rgba(var(--frosted-bg-rgb), 0.85);
}

/* ----------------------------------------
   TERMINAL FADE OUT ON SCROLL
   Controlled via JavaScript - these are the states
   ---------------------------------------- */
.terminal-bg--faded {
    opacity: 0;
}

.terminal-bg--visible {
    opacity: var(--terminal-opacity, 0.4);
}

/* ----------------------------------------
   ARTISTIC MODE TERMINAL ENHANCEMENTS
   ---------------------------------------- */
[data-mode="artistic"] .terminal-bg {
    --terminal-opacity: 0.5;
}

[data-mode="artistic"] .terminal-bg__content {
    text-shadow:
        0 0 5px var(--color-accent-neon-green),
        0 0 10px var(--color-accent-neon-green);
}

[data-mode="artistic"] .terminal-bg__cursor {
    background-color: var(--color-accent-magenta);
    box-shadow: 0 0 10px var(--color-accent-magenta);
}

/* ----------------------------------------
   RESPONSIVE
   ---------------------------------------- */
@media (max-width: 1024px) {
    .terminal-bg {
        right: 5%;
        width: 40%;
    }

    .section--frosted .container {
        max-width: 800px;
        padding-right: var(--space-lg);
    }
}

@media (max-width: 768px) {
    .terminal-bg {
        position: fixed;
        top: 50%;
        left: 50%;
        right: auto;
        transform: translate(-50%, -50%);
        width: 90%;
        max-width: 500px;
    }

    .terminal-bg__content {
        font-size: 0.875rem;
    }

    .terminal-bg__line {
        white-space: normal;
    }

    .section--frosted .container {
        max-width: 100%;
        margin-left: auto;
        margin-right: auto;
        padding-right: var(--space-lg);
    }
}

/* ----------------------------------------
   REDUCED MOTION
   ---------------------------------------- */
@media (prefers-reduced-motion: reduce) {
    .terminal-bg__cursor {
        animation: none;
        opacity: 1;
    }
}